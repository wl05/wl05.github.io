<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RN Webview å†…åµŒh5æ–¹æ¡ˆè°ƒç ” | ANT è®°å½•</title>
    <meta name="generator" content="VuePress 1.8.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.9735c5ed.css" as="style"><link rel="preload" href="/assets/js/app.20c2ee50.js" as="script"><link rel="preload" href="/assets/js/2.c1155b6d.js" as="script"><link rel="preload" href="/assets/js/66.eb35b1f0.js" as="script"><link rel="prefetch" href="/assets/js/10.c7c7f8ce.js"><link rel="prefetch" href="/assets/js/11.0d6bac72.js"><link rel="prefetch" href="/assets/js/12.8afbadb5.js"><link rel="prefetch" href="/assets/js/13.01026307.js"><link rel="prefetch" href="/assets/js/14.82187de3.js"><link rel="prefetch" href="/assets/js/15.5b47a5f0.js"><link rel="prefetch" href="/assets/js/16.476c50b4.js"><link rel="prefetch" href="/assets/js/17.5daaea42.js"><link rel="prefetch" href="/assets/js/18.706c1768.js"><link rel="prefetch" href="/assets/js/19.6c1f89ef.js"><link rel="prefetch" href="/assets/js/20.4c13fb15.js"><link rel="prefetch" href="/assets/js/21.c6269d6e.js"><link rel="prefetch" href="/assets/js/22.c820989f.js"><link rel="prefetch" href="/assets/js/23.63465ece.js"><link rel="prefetch" href="/assets/js/24.06b57371.js"><link rel="prefetch" href="/assets/js/25.7631169a.js"><link rel="prefetch" href="/assets/js/26.4dc21ad2.js"><link rel="prefetch" href="/assets/js/27.54fa8ac9.js"><link rel="prefetch" href="/assets/js/28.6da2f6ba.js"><link rel="prefetch" href="/assets/js/29.3b84b498.js"><link rel="prefetch" href="/assets/js/3.141a0dde.js"><link rel="prefetch" href="/assets/js/30.1a3ca712.js"><link rel="prefetch" href="/assets/js/31.acd6e9fc.js"><link rel="prefetch" href="/assets/js/32.723921de.js"><link rel="prefetch" href="/assets/js/33.a94aabaa.js"><link rel="prefetch" href="/assets/js/34.62d9f9bd.js"><link rel="prefetch" href="/assets/js/35.e10da7db.js"><link rel="prefetch" href="/assets/js/36.2af7bc62.js"><link rel="prefetch" href="/assets/js/37.4b21dee5.js"><link rel="prefetch" href="/assets/js/38.e2d5de64.js"><link rel="prefetch" href="/assets/js/39.2eb5e8df.js"><link rel="prefetch" href="/assets/js/4.eae85375.js"><link rel="prefetch" href="/assets/js/40.ff2190ac.js"><link rel="prefetch" href="/assets/js/41.dabde94f.js"><link rel="prefetch" href="/assets/js/42.e828286c.js"><link rel="prefetch" href="/assets/js/43.3f457a35.js"><link rel="prefetch" href="/assets/js/44.4bec6806.js"><link rel="prefetch" href="/assets/js/45.97848f66.js"><link rel="prefetch" href="/assets/js/46.e39b9931.js"><link rel="prefetch" href="/assets/js/47.b2acc87c.js"><link rel="prefetch" href="/assets/js/48.563cda9b.js"><link rel="prefetch" href="/assets/js/49.655ed33a.js"><link rel="prefetch" href="/assets/js/5.ffb4c2e6.js"><link rel="prefetch" href="/assets/js/50.b7089005.js"><link rel="prefetch" href="/assets/js/51.7afad35d.js"><link rel="prefetch" href="/assets/js/52.662feafb.js"><link rel="prefetch" href="/assets/js/53.3fdefaf4.js"><link rel="prefetch" href="/assets/js/54.33563143.js"><link rel="prefetch" href="/assets/js/55.710846f9.js"><link rel="prefetch" href="/assets/js/56.fa788c67.js"><link rel="prefetch" href="/assets/js/57.4a4c8c91.js"><link rel="prefetch" href="/assets/js/58.7ba84d41.js"><link rel="prefetch" href="/assets/js/59.120a50b4.js"><link rel="prefetch" href="/assets/js/6.2f7d43a4.js"><link rel="prefetch" href="/assets/js/60.2f515221.js"><link rel="prefetch" href="/assets/js/61.989f1a26.js"><link rel="prefetch" href="/assets/js/62.fa58cc14.js"><link rel="prefetch" href="/assets/js/63.1d358350.js"><link rel="prefetch" href="/assets/js/64.d0364210.js"><link rel="prefetch" href="/assets/js/65.76c255d8.js"><link rel="prefetch" href="/assets/js/67.cbb59cf4.js"><link rel="prefetch" href="/assets/js/68.87e1d5ac.js"><link rel="prefetch" href="/assets/js/69.b381f19d.js"><link rel="prefetch" href="/assets/js/7.8967d374.js"><link rel="prefetch" href="/assets/js/70.e3c585a6.js"><link rel="prefetch" href="/assets/js/71.3edfa114.js"><link rel="prefetch" href="/assets/js/72.c62193a8.js"><link rel="prefetch" href="/assets/js/73.77b6f4c3.js"><link rel="prefetch" href="/assets/js/74.6bc3b1ad.js"><link rel="prefetch" href="/assets/js/75.33de0318.js"><link rel="prefetch" href="/assets/js/76.68d2091e.js"><link rel="prefetch" href="/assets/js/77.09803a86.js"><link rel="prefetch" href="/assets/js/78.7885c20b.js"><link rel="prefetch" href="/assets/js/79.1259283d.js"><link rel="prefetch" href="/assets/js/8.3ae08917.js"><link rel="prefetch" href="/assets/js/80.f1ace99b.js"><link rel="prefetch" href="/assets/js/81.0b6d3cb6.js"><link rel="prefetch" href="/assets/js/82.ac9a1f6e.js"><link rel="prefetch" href="/assets/js/83.2a6a4121.js"><link rel="prefetch" href="/assets/js/84.94358229.js"><link rel="prefetch" href="/assets/js/85.114c0bd5.js"><link rel="prefetch" href="/assets/js/86.fa5e0792.js"><link rel="prefetch" href="/assets/js/87.97272018.js"><link rel="prefetch" href="/assets/js/88.b625a5c7.js"><link rel="prefetch" href="/assets/js/89.0609b7ac.js"><link rel="prefetch" href="/assets/js/9.2cd02ca5.js"><link rel="prefetch" href="/assets/js/90.6427032f.js"><link rel="prefetch" href="/assets/js/91.df714f23.js"><link rel="prefetch" href="/assets/js/92.870c38d6.js"><link rel="prefetch" href="/assets/js/93.cc306042.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9735c5ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ANT è®°å½•</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/tech/css/css-box-model/" class="nav-link">
  æŠ€æœ¯
</a></div><div class="nav-item"><a href="/read/" class="nav-link">
  è¯»ä¹¦
</a></div> <a href="https://github.com/wl05/ant-site" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/tech/css/css-box-model/" class="nav-link">
  æŠ€æœ¯
</a></div><div class="nav-item"><a href="/read/" class="nav-link">
  è¯»ä¹¦
</a></div> <a href="https://github.com/wl05/ant-site" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/css/css-box-model/" class="sidebar-link">CSS ç›’æ¨¡å‹</a></li><li><a href="/tech/css/css-bfc/" class="sidebar-link">BFC</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Javascript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/javascript/" class="sidebar-link">çŸ¥è¯†ç‚¹å‚è€ƒ</a></li><li><a href="/tech/javascript/js-data-type/" class="sidebar-link">Javascript æ•°æ®ç±»å‹</a></li><li><a href="/tech/javascript/js-type-judge/" class="sidebar-link">Javascript ç±»å‹åˆ¤æ–­</a></li><li><a href="/tech/javascript/js-type-convert/" class="sidebar-link">Javascript ç±»å‹è½¬æ¢</a></li><li><a href="/tech/javascript/js-this/" class="sidebar-link">Javascript this ç†è§£</a></li><li><a href="/tech/javascript/js-closure/" class="sidebar-link">Javascript é—­åŒ…</a></li><li><a href="/tech/javascript/ast/" class="sidebar-link">ç©è½¬AST</a></li><li><a href="/tech/javascript/event-loop/" class="sidebar-link">Event Loop</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Typescript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/typescript/basic-type/" class="sidebar-link">Typescript åŸºç¡€ç±»å‹</a></li><li><a href="/tech/typescript/type-manipulation/generics.html" class="sidebar-link">æ³›å‹</a></li><li><a href="/tech/typescript/function/" class="sidebar-link">å‡½æ•°ç±»å‹</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æµè§ˆå™¨</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/browser/1-chrome-browser-architecture/" class="sidebar-link">1ã€Chromeæµè§ˆå™¨æ¶æ„</a></li><li><a href="/tech/browser/2-what-happens-in-navigation/" class="sidebar-link">2ã€å¯¼èˆªè¿‡ç¨‹å‘ç”Ÿäº†ä»€ä¹ˆ</a></li><li><a href="/tech/browser/3-inner-workings-of-a-renderer-process/" class="sidebar-link">3ã€æ¸²æŸ“è¿›ç¨‹å·¥ä½œè¿‡ç¨‹</a></li><li><a href="/tech/browser/4-input-is-coming-to-the-compositor/" class="sidebar-link">4ã€åˆ°è¾¾åˆæˆçº¿ç¨‹çš„è¾“å…¥</a></li><li><a href="/tech/browser/how-v8-works/" class="sidebar-link">JSå¼•æ“å·¥ä½œåŸç†è¯¦è§£</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å‰ç«¯æ€§èƒ½ä¼˜åŒ–</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å‰ç«¯æ¡†æ¶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/framework/react/create-your-own-react/" class="sidebar-link">æ‰‹å†™ React</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>è®¾è®¡æ¨¡å¼</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/design-patterns/" class="sidebar-link">TODO</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>web å®‰å…¨</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/web-security/xss/" class="sidebar-link">XSS æ”»å‡»</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>git</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/git/git-base.html" class="sidebar-link">git å‘½ä»¤æ€»ç»“</a></li><li><a href="/tech/git/git-rebase/" class="sidebar-link">git rebase è¯¦è§£</a></li><li><a href="/tech/git/git-config.html" class="sidebar-link">git å‘½ä»¤åˆ«åé…ç½®</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç®—æ³•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/algorithm/leetcode/" class="sidebar-link">leetcode çƒ­é—¨é¢˜ç›®</a></li><li><a href="/tech/algorithm/leetcode/dynamic-programming.html" class="sidebar-link">åŠ¨æ€è§„åˆ’</a></li><li><a href="/tech/algorithm/leetcode/greedy-algorithm.html" class="sidebar-link">è´ªå¿ƒç®—æ³•</a></li><li><a href="/tech/algorithm/leetcode/bfs.html" class="sidebar-link">BFS ï¼ˆå¹¿åº¦ä¼˜å…ˆéå†ï¼‰</a></li><li><a href="/tech/algorithm/leetcode/dfs.html" class="sidebar-link">DFS ï¼ˆæ·±åº¦ä¼˜å…ˆéå†ï¼‰</a></li><li><a href="/tech/algorithm/sort-algorithm/bubble-sort.html" class="sidebar-link">å†’æ³¡ç®—æ³•</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å‰ç«¯ç›‘æ§</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/monitor/monitor/" class="sidebar-link">æ­å»ºå‰ç«¯ç›‘æ§ç³»ç»Ÿ</a></li><li><a href="/tech/monitor/data-visualization/histogram/" class="sidebar-link">ç›´æ–¹å›¾ ï¼ˆHistogramï¼‰</a></li><li><a href="/tech/monitor/data-visualization/1/" class="sidebar-link">1. Promethus ä»‹ç»</a></li><li><a href="/tech/monitor/data-visualization/2/" class="sidebar-link">2. Exporter å®æˆ˜è¯¦è§£</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>React Native</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/react-native/webview/" aria-current="page" class="active sidebar-link">RN Webview å†…åµŒh5æ–¹æ¡ˆè°ƒç ”</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/react-native/webview/#èƒŒæ™¯" class="sidebar-link">èƒŒæ™¯</a></li><li class="sidebar-sub-header"><a href="/tech/react-native/webview/#æŠ€æœ¯éœ€æ±‚" class="sidebar-link">æŠ€æœ¯éœ€æ±‚</a></li><li class="sidebar-sub-header"><a href="/tech/react-native/webview/#æ–¹æ¡ˆ" class="sidebar-link">æ–¹æ¡ˆ</a></li><li class="sidebar-sub-header"><a href="/tech/react-native/webview/#è¯¦ç»†è®¾è®¡" class="sidebar-link">è¯¦ç»†è®¾è®¡</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ€è€ƒ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/think/2021-06-20.html" class="sidebar-link">æŠ¬å¤´çœ‹è·¯</a></li><li><a href="/tech/think/2022-02-14.html" class="sidebar-link">è¢«å‡ ä¸ªæœˆä»£ç†leader</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å…¶ä»–</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/other/abort-request.html" class="sidebar-link">ç»ˆæ­¢å¼‚æ­¥ä»»åŠ¡</a></li><li><a href="/tech/other/cicd-concepts.html" class="sidebar-link">CI/CD æ¦‚å¿µ</a></li><li><a href="/tech/other/flow-chart.html" class="sidebar-link">æµç¨‹å›¾è§„èŒƒ</a></li><li><a href="/tech/other/google-search.html" class="sidebar-link">google æœç´¢æŠ€å·§</a></li><li><a href="/tech/other/how-to-output-log.html" class="sidebar-link">å‚è€ƒèµ„æ–™</a></li><li><a href="/tech/other/linux-command.html" class="sidebar-link">linux å¸¸ç”¨å‘½ä»¤</a></li><li><a href="/tech/other/sketchup.html" class="sidebar-link">SketchUp åŸºç¡€å…¥é—¨</a></li><li><a href="/tech/other/docker/docker-introduction/" class="sidebar-link">Docker æµ…å°è¾„æ­¢</a></li><li><a href="/tech/other/lerna/" class="sidebar-link">lerna ç®€å•å…¥é—¨</a></li><li><a href="/tech/other/npm/" class="sidebar-link">é‡æ–°è®¤è¯† npm</a></li><li><a href="/tech/other/svg/" class="sidebar-link">svg ä¸å®Œå…¨å…¥é—¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>é¢è¯•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/interview/handwritten-topic.html" class="sidebar-link">å‰ç«¯æ‰‹å†™é¢˜</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rn-webview-å†…åµŒh5æ–¹æ¡ˆè°ƒç ”"><a href="#rn-webview-å†…åµŒh5æ–¹æ¡ˆè°ƒç ”" class="header-anchor">#</a> RN Webview å†…åµŒh5æ–¹æ¡ˆè°ƒç ”</h1> <p></p><div class="table-of-contents"><ul><li><a href="#rn-webview-å†…åµŒh5æ–¹æ¡ˆè°ƒç ”">RN Webview å†…åµŒh5æ–¹æ¡ˆè°ƒç ”</a><ul><li><a href="#èƒŒæ™¯">èƒŒæ™¯</a></li><li><a href="#æŠ€æœ¯éœ€æ±‚">æŠ€æœ¯éœ€æ±‚</a></li><li><a href="#æ–¹æ¡ˆ">æ–¹æ¡ˆ</a></li><li><a href="#è¯¦ç»†è®¾è®¡">è¯¦ç»†è®¾è®¡</a><ul><li><a href="#webview-ä¾èµ–">webview ä¾èµ–</a></li><li><a href="#webview-æ–‡ä»¶æƒé™è®¾ç½®">Webview æ–‡ä»¶æƒé™è®¾ç½®</a></li><li><a href="#åŠ è½½æœ¬åœ°èµ„æº">åŠ è½½æœ¬åœ°èµ„æº</a><ul><li><a href="#å¼€å‘ç¯å¢ƒ">å¼€å‘ç¯å¢ƒ</a></li><li><a href="#ç”Ÿäº§ç¯å¢ƒ">ç”Ÿäº§ç¯å¢ƒ</a></li></ul></li><li><a href="#rn-å’Œ-h5-ä¹‹é—´é€šä¿¡">RN å’Œ H5 ä¹‹é—´é€šä¿¡</a></li><li><a href="#h5-ä¸­å‘èµ·çš„è¯·æ±‚é‰´æƒé—®é¢˜">H5 ä¸­å‘èµ·çš„è¯·æ±‚é‰´æƒé—®é¢˜</a></li><li><a href="#h5-ä¸­çš„å¤šè¯­è¨€æ–¹æ¡ˆ">H5 ä¸­çš„å¤šè¯­è¨€æ–¹æ¡ˆ</a></li></ul></li></ul></li></ul></div><p></p> <h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="header-anchor">#</a> èƒŒæ™¯</h2> <ol><li>driver rn æ–°å¢éª‘æ‰‹æ³¨å†ŒåŠŸèƒ½ï¼Œæ¶‰åŠåˆ°å¤æ‚è¡¨å•çš„å¡«å†™ã€‚è¿™éƒ¨åˆ†è¡¨å•åœ¨ä¹‹å‰çš„ foms é¡¹ç›®ï¼ˆè¿è¥äººå‘˜ä½¿ç”¨çš„æ‹›å‹Ÿéª‘æ‰‹çš„H5ï¼ŒååŠ©éª‘æ‰‹æ³¨å†Œï¼‰ä¸­åŸºæœ¬å·²ç»å®ç°è¿‡ä¸€éï¼Œè¡¨å•å­—æ®µå’Œæ ¡éªŒåŸºæœ¬ä¸€è‡´ã€‚</li> <li>åç»­ä¼šå°†æ³¨å†Œæµç¨‹è¿ç§»åˆ° pc ç«¯å’Œ mobile h5 ä¸Šï¼Œè®©éª‘æ‰‹ä¸ä¸‹è½½appä¹Ÿå¯ä»¥å®ç°æ³¨å†Œã€‚</li></ol> <p>ä¸ºäº†èŠ‚çœäººåŠ›å’Œæ—¶é—´ä»¥åŠä¸ºäº†åç»­çš„è¿ç§»ï¼Œå†³å®šé‡‡ç”¨å†…åµŒ h5 çš„æ–¹å¼æ¥å®ç°è¿™éƒ¨åˆ†è¡¨å•çš„åŠŸèƒ½ã€‚</p> <h2 id="æŠ€æœ¯éœ€æ±‚"><a href="#æŠ€æœ¯éœ€æ±‚" class="header-anchor">#</a> æŠ€æœ¯éœ€æ±‚</h2> <ul><li>æ‰€æœ‰çš„ H5 èµ„æºéƒ½æ‰“åŒ…è¿›æœ€åçš„ rn bundle ä¸­ï¼Œæœ€å app æœ¬åœ°åŠ è½½ H5 èµ„æº</li> <li>RN é¡µé¢å’Œ H5 é¡µé¢å¯ä»¥ç›¸äº’é€šä¿¡ã€‚</li></ul> <h2 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="header-anchor">#</a> æ–¹æ¡ˆ</h2> <ol><li>å°†æ‰“åŒ…å¥½çš„é™æ€èµ„æºæ”¾ç½®åœ¨ main/assets ç›®å½•ä¸‹</li> <li>ä½¿ç”¨ webview åŠ è½½æœ¬åœ°çš„é™æ€èµ„æºï¼Œ<a href="https://github.com/react-native-webview/react-native-webview/blob/master/docs/Guide.md#basic-inline-html" target="_blank" rel="noopener noreferrer">åŠ è½½æœºåˆ¶<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>RN H5 <a href="https://github.com/react-native-webview/react-native-webview/blob/master/docs/Guide.md#communicating-between-js-and-native" target="_blank" rel="noopener noreferrer">é€šä¿¡æœºåˆ¶<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <h2 id="è¯¦ç»†è®¾è®¡"><a href="#è¯¦ç»†è®¾è®¡" class="header-anchor">#</a> è¯¦ç»†è®¾è®¡</h2> <h3 id="webview-ä¾èµ–"><a href="#webview-ä¾èµ–" class="header-anchor">#</a> webview ä¾èµ–</h3> <p>Driver App ç›®å‰ä½¿ç”¨çš„ RN ç‰ˆæœ¬æ˜¯ 0.63.3ï¼ŒRNåŸæœ‰çš„ <a href="https://reactnative.dev/docs/0.61/webview#injectedjavascript" target="_blank" rel="noopener noreferrer">Webview<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ç‰ˆæœ¬å·²ç»è¢«åºŸå¼ƒæ‰äº†ï¼Œä¸å†æ”¯æŒWebviewç»„ä»¶ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ç¤¾åŒºæä¾›çš„ <a href="https://github.com/react-native-webview/react-native-webview" target="_blank" rel="noopener noreferrer">react-native-webview<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œè¯¥ç»„ä»¶å®‰è£…éœ€è¦ linkï¼ŒåŸºäºç›®å‰æˆ‘ä»¬é¡¹ç›®é‡‡ç”¨çš„ Native å£³å­ + RN çš„æ¶æ„æ–¹å¼ï¼Œéœ€è¦å®¢æˆ·ç«¯ååŠ©æ·»åŠ <a href="https://github.com/react-native-webview/react-native-webview/blob/master/docs/Getting-Started.md" target="_blank" rel="noopener noreferrer">ç›¸å…³ä¾èµ–<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="webview-æ–‡ä»¶æƒé™è®¾ç½®"><a href="#webview-æ–‡ä»¶æƒé™è®¾ç½®" class="header-anchor">#</a> Webview æ–‡ä»¶æƒé™è®¾ç½®</h3> <p>Webview è¡¨å•ä¸­æ¶‰åŠåˆ°å¤šå¤„éœ€è¦ä¸Šä¼ ç…§ç‰‡çš„å­—æ®µï¼ŒWebview ä¸­ä¸Šä¼ æ–‡ä»¶éœ€è¦Nativeç«¯è®¾ç½®ç›¸åº”çš„æƒé™ï¼ŒåŸºäºç›®å‰å·²ç»æœ‰ä¸Šä¼ å›¾ç‰‡åŠŸèƒ½çš„æƒ…å†µï¼Œ<strong>ä¹Ÿè®¸å·²ç»éƒ½åŠ è¿‡æƒé™äº†ï¼Ÿ// TODO: å¾…åç»­éªŒè¯</strong></p> <h3 id="åŠ è½½æœ¬åœ°èµ„æº"><a href="#åŠ è½½æœ¬åœ°èµ„æº" class="header-anchor">#</a> åŠ è½½æœ¬åœ°èµ„æº</h3> <h4 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="header-anchor">#</a> å¼€å‘ç¯å¢ƒ</h4> <p>å¼€å‘ç¯å¢ƒä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œåœ¨ webview ä¸­åŠ è½½ h5 æ—¶ç›´æ¥ä½¿ç”¨æœ¬åœ°å¼€å‘æœåŠ¡ä¾‹å¦‚ï¼š</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>View<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>WebView<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native-webview'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WebView</span></span>
        <span class="token attr-name">source</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          uri<span class="token operator">:</span> <span class="token string">'http://localhost:8000'</span><span class="token punctuation">,</span> <span class="token comment">// H5æœ¬åœ°å¼€å‘æœåŠ¡</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ç”Ÿäº§ç¯å¢ƒ"><a href="#ç”Ÿäº§ç¯å¢ƒ" class="header-anchor">#</a> ç”Ÿäº§ç¯å¢ƒ</h4> <p>ä¸ºäº†å‘å¸ƒç”Ÿäº§ç¯å¢ƒï¼Œéœ€è¦æå‰å°† H5 æ‰“åŒ…å¥½ï¼Œå°†æœ€ç»ˆæ‰“åŒ…å¥½çš„æ–‡ä»¶æ‹·è´åˆ° main/assets (<strong>è¿™ä¸€æ­¥è¿˜æ²¡æƒ³åˆ°æ¯”è¾ƒä¾¿æ·çš„æ–¹æ¡ˆï¼Œç›®å‰åªèƒ½æ‰‹åŠ¨æ‹·è´</strong>)</p> <p>å®˜æ–¹æä¾›äº†ä¸‰ç§<a href="https://github.com/react-native-webview/react-native-webview/blob/master/docs/Guide.md#basic-inline-html" target="_blank" rel="noopener noreferrer">åŠ è½½ htmlçš„æ–¹å¼<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼š</p> <ol><li>html å­—ç¬¦ä¸²</li> <li>url é“¾æ¥</li> <li>åŠ è½½æœ¬åœ° html æ–‡ä»¶ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼Œä½†æ˜¯æœ‰<a href="https://github.com/react-native-webview/react-native-webview/blob/master/docs/Guide.md#loading-local-html-files" target="_blank" rel="noopener noreferrer">å‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ğŸ¤®ã€‚</li></ol> <p>ç¬¬ä¸‰ç§æ–¹å¼ï¼Œå®˜æ–¹è‡ªå·±éƒ½å·²ç»å¼ƒå‘æ˜ç¡®è¯´äº†è¿™ç§æ–¹å¼ä¸è¡Œï¼Œå¯ä»¥çœ‹ä¸‹ issue <a href="https://github.com/react-native-webview/react-native-webview/issues/428" target="_blank" rel="noopener noreferrer">#428<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å’Œ <a href="https://github.com/react-native-webview/react-native-webview/issues/518" target="_blank" rel="noopener noreferrer">#518<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ä¸­çš„è®¨è®ºï¼Œå®˜æ–¹å»ºè®®å°†æ‰€æœ‰çš„èµ„æºæ‰“åŒ…è¿›ä¸€ä¸ªhtmlæ–‡ä»¶é‡Œé¢ï¼Œå®è·µå‘ç°è¿™ä¸ªå‘ç¡®å®æœ‰ï¼Œä¸‹é¢æ˜¯åŠ è½½æ–¹å¼çš„å®è·µã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// demo/demo.js</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">template</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;div style=&quot;display: flex;align-items: center;justify-content: center;height: 800px&quot;&gt;
      hello world
    &lt;/div&gt;
  &lt;/body&gt;
  &lt;script src=&quot;./index.js&quot;&gt;&lt;/script&gt;
&lt;/html&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code>// demo/html
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 800px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
      hello world
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// demo/index.js</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ç„¶åå°†demoæ–‡ä»¶æ‹·è´ä¸€ä»½åˆ° <code>android/app/src/main/assets/</code> ç›®å½•ä¸‹ï¼Œæ–¹ä¾¿ä¸‹é¢å°è¯•ä¸åŒçš„åŠ è½½æ–¹å¼</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>View<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>WebView<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native-webview'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'./demo/demo.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WebView</span></span>
        <span class="token attr-name">source</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>html<span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token comment">// æ–¹å¼ä¸€ï¼šè¿™ç§æ–¹å¼iosã€androidéƒ½èƒ½æ­£å¸¸æ¸²æŸ“ï¼Œä½†æ˜¯htmlå¿…é¡»ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å¯¼å‡ºï¼Œhtmlçš„é‡Œé¢çš„å¤–éƒ¨é“¾æ¥æ— æ³•åŠ è½½ï¼Œæ‰€ä»¥å®˜æ–¹å»ºè®®å°†æ‰€æœ‰èµ„æºæ‰“åŒ…åœ¨ä¸€èµ·ã€‚</span>
        <span class="token comment">// source={require('./demo/index.html')} // æ–¹å¼äºŒ è¿™ç§æ–¹å¼iosæ­£å¸¸æ¸²æŸ“ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½åŠ è½½å¤–éƒ¨é“¾æ¥ï¼Œandroid æ¸²æŸ“å‡ºæ¥æ˜¯htmlå­—ç¬¦ä¸²</span>
        <span class="token comment">// source={</span>
        <span class="token comment">//   Platform.OS === 'ios'</span>
        <span class="token comment">//     ? require('./demo/index.html')</span>
        <span class="token comment">//     : {uri: 'file:///android_asset/demo/demo.html'}</span>
        <span class="token comment">// } // æ–¹å¼ä¸‰: å®˜æ–¹æä¾›çš„æ–¹å¼ï¼Œæ¢ä¸€ç§æ–¹å¼åŠ è½½ android èµ„æºï¼Œå®è·µå‘ç°androidåŠ è½½ç›´æ¥æŠ¥é”™ã€‚</span>
        <span class="token attr-name">onMessage</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>nativeEvent<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">originWhiteList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>ç»è¿‡å®è·µå‘ç°æ–¹å¼ä¸€å‹‰å¼ºèƒ½è¾¾åˆ°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œ<strong>éœ€è¦ç ”ç©¶ä¸€ä¸‹å¦‚ä½•å°†æ‰€æœ‰èµ„æºæ‰“è¿›ä¸€ä¸ªåŒ…é‡Œï¼Œæ‰“è¿›ä¸€ä¸ªåŒ…é‡Œæœ‰æ²¡æœ‰å…¶ä»–å‘ï¼Ÿ</strong></p> <h3 id="rn-å’Œ-h5-ä¹‹é—´é€šä¿¡"><a href="#rn-å’Œ-h5-ä¹‹é—´é€šä¿¡" class="header-anchor">#</a> RN å’Œ H5 ä¹‹é—´é€šä¿¡</h3> <p>RN ä¸­æä¾›äº†å››ç§é€šä¿¡æ–¹å¼ï¼š</p> <ol><li>injectedJavaScript(RN-&gt;web)</li></ol> <p>injectedJavaScript æ˜¯jsè„šæœ¬çš„å­—ç¬¦ä¸²ï¼Œåœ¨é¡µé¢ç¬¬ä¸€æ¬¡åŠ è½½å®Œæˆåç«‹å³æ‰§è¡Œä¸”åªæ‰§è¡Œä¸€æ¬¡</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>View<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>WebView<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native-webview'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> script <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  setTimeout(function() { window.alert('hello world') }, 1000);
  true; // æ³¨æ„è¿™ä¸ª true æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™å¯èƒ½ä¼šæŠ¥é”™
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WebView</span></span>
        <span class="token attr-name">source</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          uri<span class="token operator">:</span> <span class="token string">'http://localhost:8000'</span><span class="token punctuation">,</span> <span class="token comment">// H5æœ¬åœ°å¼€å‘æœåŠ¡</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">injectedJavaScript</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>script<span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>åŠ è½½å®Œç½‘é¡µåï¼Œ1ç§’é’Ÿåå¼¹å‡º &quot;hello world&quot;</p> <ol start="2"><li>injectedJavaScriptBeforeContentLoaded (RN-&gt;web)</li></ol> <p><code>injectedJavaScriptBeforeContentLoaded</code> æ³¨å…¥çš„ä»£ç åœ¨é¡µé¢é¦–æ¬¡åŠ è½½ä¹‹å‰æ‰§è¡Œä¸”åªæ‰§è¡Œä¸€æ¬¡ã€‚ç”¨æ³•åŒ injectedJavaScript</p> <ol start="3"><li>injectJavaScript(RN-&gt;web)</li></ol> <p>injectedJavaScript çš„ç¼ºç‚¹æ˜¯åªåœ¨é¡µé¢åŠ è½½å®Œåæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœåç»­æƒ³ç»§ç»­å¾€ webviewé‡Œé¢æ³¨å…¥ä»£ç å¯ä»¥ä½¿ç”¨ webview ref çš„ injectJavaScript æ–¹æ³•</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>useRef<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">,</span> View<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>WebView<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native-webview'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> script <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  setTimeout(function() { window.alert('hello world') }, 1000);
  true; 
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>WebView<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ref<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">injectJavaScript</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">window.alert('click');true;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Button<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WebView</span></span>
        <span class="token attr-name">source</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          uri<span class="token operator">:</span> <span class="token string">'http://localhost:8000'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span>
        <span class="token attr-name">injectedJavaScript</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>script<span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>postMessage å’Œ onMessage(web-&gt;RN)</li></ol> <p>web é¡µé¢å¾€ RN å‘é€æ¶ˆæ¯ï¼Œéœ€è¦ç»„åˆä½¿ç”¨ <code>window.ReactNativeWebView.postMessage</code>æ–¹æ³•å’Œ<code>onMessage</code>å›è°ƒ</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>View<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>WebView<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native-webview'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> script <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
setTimeout(function () {
  window.ReactNativeWebView.postMessage(&quot;Hello!&quot;)
}, 2000)
true; 
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WebView</span></span>
        <span class="token attr-name">source</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          uri<span class="token operator">:</span> <span class="token string">'http://localhost:8000'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">onMessage</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>nativeEvent<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">injectedJavaScript</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>script<span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬é€šè¿‡åœ¨é¡µé¢åŠ è½½å®Œåå¾€ç½‘é¡µä¸­æ³¨å…¥jsä»£ç æ‰§è¡Œ <code>window.ReactNativeWebView.postMessage(&quot;Hello!&quot;)</code>, åœ¨RNä¾§é€šè¿‡ <code>onMessage</code> å›è°ƒæ¥æ”¶åˆ°å‘é€è¿‡æ¥çš„æ•°æ®ã€‚</p> <p><strong>æ³¨æ„ï¼š</strong></p> <ol><li>å¿…é¡»è¦æŒ‡å®šonMessageå›è°ƒ<code>window.ReactNativeWebView.postMessage</code>æ‰ä¼šè¢«æ³¨å…¥åˆ°ç½‘é¡µä¸­</li> <li><code>window.ReactNativeWebView.postMessage</code> åªæ¥æ”¶ä¸€ä¸ªå‚æ•°åˆ‡å¿…é¡»æ˜¯å­—ç¬¦ä¸²ã€‚</li></ol> <h3 id="h5-ä¸­å‘èµ·çš„è¯·æ±‚é‰´æƒé—®é¢˜"><a href="#h5-ä¸­å‘èµ·çš„è¯·æ±‚é‰´æƒé—®é¢˜" class="header-anchor">#</a> H5 ä¸­å‘èµ·çš„è¯·æ±‚é‰´æƒé—®é¢˜</h3> <p>æ˜¯å¦éœ€è¦æ‰‹åŠ¨è®¾ç½® header ç­‰ä¿¡æ¯</p> <p>// TODO: å¾…éªŒè¯</p> <h3 id="h5-ä¸­çš„å¤šè¯­è¨€æ–¹æ¡ˆ"><a href="#h5-ä¸­çš„å¤šè¯­è¨€æ–¹æ¡ˆ" class="header-anchor">#</a> H5 ä¸­çš„å¤šè¯­è¨€æ–¹æ¡ˆ</h3> <p>ç›®å‰æƒ³åˆ°ä¸¤ç§æ–¹æ¡ˆï¼š</p> <ol><li>RNå’ŒH5å•ç‹¬æ‹‰å¤šè¯­è¨€é…ç½®ï¼Œè¿™ç§æ–¹å¼æœ‰ä¸¤ä¸ªå¼Šç«¯ï¼šä¸€ã€ç¿»è¯‘æ›´æ–°å¯èƒ½éœ€è¦åŒæ—¶åœ¨ webå’Œrnä¸­é‡æ–°æ‹‰æœ€æ–°çš„ç¿»è¯‘ï¼ŒäºŒã€å†—ä½™ï¼Œä¸¤è¾¹æŒæœ‰åŒæ ·ä¸€ä»½é…ç½®ä½†æ˜¯åªç”¨åˆ°äº†ä¸€éƒ¨åˆ†ã€‚ä½†æ˜¯å¥½å¤„æ˜¯åç»­è¿ç§»æ¯”è¾ƒæ–¹ä¾¿ã€‚</li> <li>æš´åŠ›ä¸€ç‚¹çš„æ–¹æ³•ï¼Œç›´æ¥æ ¹æ®å½“å‰çš„è¯­è¨€ç¯å¢ƒï¼Œè·å–å¯¹åº”çš„é…ç½®å…¨éƒ¨å¡åˆ°webviewé‡Œé¢ï¼Œç¼ºç‚¹ä¹Ÿæ˜¯å†—ä½™ã€‚</li> <li>ä¸“é—¨ç»´æŠ¤ä¸€ä»½H5å¤šè¯­è¨€å¯¹åº”çš„keyçš„listï¼Œåœ¨ä½¿ç”¨æ–¹å¼2çš„æ—¶å€™æŠŠè¿™äº›keyè¿‡æ»¤å‡ºæ¥åå†å¡åˆ° webview é‡Œé¢ã€‚</li></ol> <p>// TODO: å¾…è®¨è®º</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/tech/monitor/data-visualization/2/" class="prev">
        2. Exporter å®æˆ˜è¯¦è§£
      </a></span> <span class="next"><a href="/tech/think/2021-06-20.html">
        æŠ¬å¤´çœ‹è·¯
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.20c2ee50.js" defer></script><script src="/assets/js/2.c1155b6d.js" defer></script><script src="/assets/js/66.eb35b1f0.js" defer></script>
  </body>
</html>
