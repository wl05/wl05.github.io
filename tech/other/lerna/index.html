<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>lerna ç®€å•å…¥é—¨ | ANT è®°å½•</title>
    <meta name="generator" content="VuePress 1.8.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.9735c5ed.css" as="style"><link rel="preload" href="/assets/js/app.20c2ee50.js" as="script"><link rel="preload" href="/assets/js/2.c1155b6d.js" as="script"><link rel="preload" href="/assets/js/20.4c13fb15.js" as="script"><link rel="prefetch" href="/assets/js/10.c7c7f8ce.js"><link rel="prefetch" href="/assets/js/11.0d6bac72.js"><link rel="prefetch" href="/assets/js/12.8afbadb5.js"><link rel="prefetch" href="/assets/js/13.01026307.js"><link rel="prefetch" href="/assets/js/14.82187de3.js"><link rel="prefetch" href="/assets/js/15.5b47a5f0.js"><link rel="prefetch" href="/assets/js/16.476c50b4.js"><link rel="prefetch" href="/assets/js/17.5daaea42.js"><link rel="prefetch" href="/assets/js/18.706c1768.js"><link rel="prefetch" href="/assets/js/19.6c1f89ef.js"><link rel="prefetch" href="/assets/js/21.c6269d6e.js"><link rel="prefetch" href="/assets/js/22.c820989f.js"><link rel="prefetch" href="/assets/js/23.63465ece.js"><link rel="prefetch" href="/assets/js/24.06b57371.js"><link rel="prefetch" href="/assets/js/25.7631169a.js"><link rel="prefetch" href="/assets/js/26.4dc21ad2.js"><link rel="prefetch" href="/assets/js/27.54fa8ac9.js"><link rel="prefetch" href="/assets/js/28.6da2f6ba.js"><link rel="prefetch" href="/assets/js/29.3b84b498.js"><link rel="prefetch" href="/assets/js/3.141a0dde.js"><link rel="prefetch" href="/assets/js/30.1a3ca712.js"><link rel="prefetch" href="/assets/js/31.acd6e9fc.js"><link rel="prefetch" href="/assets/js/32.723921de.js"><link rel="prefetch" href="/assets/js/33.a94aabaa.js"><link rel="prefetch" href="/assets/js/34.62d9f9bd.js"><link rel="prefetch" href="/assets/js/35.e10da7db.js"><link rel="prefetch" href="/assets/js/36.2af7bc62.js"><link rel="prefetch" href="/assets/js/37.4b21dee5.js"><link rel="prefetch" href="/assets/js/38.e2d5de64.js"><link rel="prefetch" href="/assets/js/39.2eb5e8df.js"><link rel="prefetch" href="/assets/js/4.eae85375.js"><link rel="prefetch" href="/assets/js/40.ff2190ac.js"><link rel="prefetch" href="/assets/js/41.dabde94f.js"><link rel="prefetch" href="/assets/js/42.e828286c.js"><link rel="prefetch" href="/assets/js/43.3f457a35.js"><link rel="prefetch" href="/assets/js/44.4bec6806.js"><link rel="prefetch" href="/assets/js/45.97848f66.js"><link rel="prefetch" href="/assets/js/46.e39b9931.js"><link rel="prefetch" href="/assets/js/47.b2acc87c.js"><link rel="prefetch" href="/assets/js/48.563cda9b.js"><link rel="prefetch" href="/assets/js/49.655ed33a.js"><link rel="prefetch" href="/assets/js/5.ffb4c2e6.js"><link rel="prefetch" href="/assets/js/50.b7089005.js"><link rel="prefetch" href="/assets/js/51.7afad35d.js"><link rel="prefetch" href="/assets/js/52.662feafb.js"><link rel="prefetch" href="/assets/js/53.3fdefaf4.js"><link rel="prefetch" href="/assets/js/54.33563143.js"><link rel="prefetch" href="/assets/js/55.710846f9.js"><link rel="prefetch" href="/assets/js/56.fa788c67.js"><link rel="prefetch" href="/assets/js/57.4a4c8c91.js"><link rel="prefetch" href="/assets/js/58.7ba84d41.js"><link rel="prefetch" href="/assets/js/59.120a50b4.js"><link rel="prefetch" href="/assets/js/6.2f7d43a4.js"><link rel="prefetch" href="/assets/js/60.2f515221.js"><link rel="prefetch" href="/assets/js/61.989f1a26.js"><link rel="prefetch" href="/assets/js/62.fa58cc14.js"><link rel="prefetch" href="/assets/js/63.1d358350.js"><link rel="prefetch" href="/assets/js/64.d0364210.js"><link rel="prefetch" href="/assets/js/65.76c255d8.js"><link rel="prefetch" href="/assets/js/66.eb35b1f0.js"><link rel="prefetch" href="/assets/js/67.cbb59cf4.js"><link rel="prefetch" href="/assets/js/68.87e1d5ac.js"><link rel="prefetch" href="/assets/js/69.b381f19d.js"><link rel="prefetch" href="/assets/js/7.8967d374.js"><link rel="prefetch" href="/assets/js/70.e3c585a6.js"><link rel="prefetch" href="/assets/js/71.3edfa114.js"><link rel="prefetch" href="/assets/js/72.c62193a8.js"><link rel="prefetch" href="/assets/js/73.77b6f4c3.js"><link rel="prefetch" href="/assets/js/74.6bc3b1ad.js"><link rel="prefetch" href="/assets/js/75.33de0318.js"><link rel="prefetch" href="/assets/js/76.68d2091e.js"><link rel="prefetch" href="/assets/js/77.09803a86.js"><link rel="prefetch" href="/assets/js/78.7885c20b.js"><link rel="prefetch" href="/assets/js/79.1259283d.js"><link rel="prefetch" href="/assets/js/8.3ae08917.js"><link rel="prefetch" href="/assets/js/80.f1ace99b.js"><link rel="prefetch" href="/assets/js/81.0b6d3cb6.js"><link rel="prefetch" href="/assets/js/82.ac9a1f6e.js"><link rel="prefetch" href="/assets/js/83.2a6a4121.js"><link rel="prefetch" href="/assets/js/84.94358229.js"><link rel="prefetch" href="/assets/js/85.114c0bd5.js"><link rel="prefetch" href="/assets/js/86.fa5e0792.js"><link rel="prefetch" href="/assets/js/87.97272018.js"><link rel="prefetch" href="/assets/js/88.b625a5c7.js"><link rel="prefetch" href="/assets/js/89.0609b7ac.js"><link rel="prefetch" href="/assets/js/9.2cd02ca5.js"><link rel="prefetch" href="/assets/js/90.6427032f.js"><link rel="prefetch" href="/assets/js/91.df714f23.js"><link rel="prefetch" href="/assets/js/92.870c38d6.js"><link rel="prefetch" href="/assets/js/93.cc306042.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9735c5ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ANT è®°å½•</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/tech/css/css-box-model/" class="nav-link">
  æŠ€æœ¯
</a></div><div class="nav-item"><a href="/read/" class="nav-link">
  è¯»ä¹¦
</a></div> <a href="https://github.com/wl05/ant-site" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/tech/css/css-box-model/" class="nav-link">
  æŠ€æœ¯
</a></div><div class="nav-item"><a href="/read/" class="nav-link">
  è¯»ä¹¦
</a></div> <a href="https://github.com/wl05/ant-site" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/css/css-box-model/" class="sidebar-link">CSS ç›’æ¨¡å‹</a></li><li><a href="/tech/css/css-bfc/" class="sidebar-link">BFC</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Javascript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/javascript/" class="sidebar-link">çŸ¥è¯†ç‚¹å‚è€ƒ</a></li><li><a href="/tech/javascript/js-data-type/" class="sidebar-link">Javascript æ•°æ®ç±»å‹</a></li><li><a href="/tech/javascript/js-type-judge/" class="sidebar-link">Javascript ç±»å‹åˆ¤æ–­</a></li><li><a href="/tech/javascript/js-type-convert/" class="sidebar-link">Javascript ç±»å‹è½¬æ¢</a></li><li><a href="/tech/javascript/js-this/" class="sidebar-link">Javascript this ç†è§£</a></li><li><a href="/tech/javascript/js-closure/" class="sidebar-link">Javascript é—­åŒ…</a></li><li><a href="/tech/javascript/ast/" class="sidebar-link">ç©è½¬AST</a></li><li><a href="/tech/javascript/event-loop/" class="sidebar-link">Event Loop</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Typescript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/typescript/basic-type/" class="sidebar-link">Typescript åŸºç¡€ç±»å‹</a></li><li><a href="/tech/typescript/type-manipulation/generics.html" class="sidebar-link">æ³›å‹</a></li><li><a href="/tech/typescript/function/" class="sidebar-link">å‡½æ•°ç±»å‹</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æµè§ˆå™¨</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/browser/1-chrome-browser-architecture/" class="sidebar-link">1ã€Chromeæµè§ˆå™¨æ¶æ„</a></li><li><a href="/tech/browser/2-what-happens-in-navigation/" class="sidebar-link">2ã€å¯¼èˆªè¿‡ç¨‹å‘ç”Ÿäº†ä»€ä¹ˆ</a></li><li><a href="/tech/browser/3-inner-workings-of-a-renderer-process/" class="sidebar-link">3ã€æ¸²æŸ“è¿›ç¨‹å·¥ä½œè¿‡ç¨‹</a></li><li><a href="/tech/browser/4-input-is-coming-to-the-compositor/" class="sidebar-link">4ã€åˆ°è¾¾åˆæˆçº¿ç¨‹çš„è¾“å…¥</a></li><li><a href="/tech/browser/how-v8-works/" class="sidebar-link">JSå¼•æ“å·¥ä½œåŸç†è¯¦è§£</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å‰ç«¯æ€§èƒ½ä¼˜åŒ–</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å‰ç«¯æ¡†æ¶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/framework/react/create-your-own-react/" class="sidebar-link">æ‰‹å†™ React</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>è®¾è®¡æ¨¡å¼</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/design-patterns/" class="sidebar-link">TODO</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>web å®‰å…¨</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/web-security/xss/" class="sidebar-link">XSS æ”»å‡»</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>git</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/git/git-base.html" class="sidebar-link">git å‘½ä»¤æ€»ç»“</a></li><li><a href="/tech/git/git-rebase/" class="sidebar-link">git rebase è¯¦è§£</a></li><li><a href="/tech/git/git-config.html" class="sidebar-link">git å‘½ä»¤åˆ«åé…ç½®</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç®—æ³•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/algorithm/leetcode/" class="sidebar-link">leetcode çƒ­é—¨é¢˜ç›®</a></li><li><a href="/tech/algorithm/leetcode/dynamic-programming.html" class="sidebar-link">åŠ¨æ€è§„åˆ’</a></li><li><a href="/tech/algorithm/leetcode/greedy-algorithm.html" class="sidebar-link">è´ªå¿ƒç®—æ³•</a></li><li><a href="/tech/algorithm/leetcode/bfs.html" class="sidebar-link">BFS ï¼ˆå¹¿åº¦ä¼˜å…ˆéå†ï¼‰</a></li><li><a href="/tech/algorithm/leetcode/dfs.html" class="sidebar-link">DFS ï¼ˆæ·±åº¦ä¼˜å…ˆéå†ï¼‰</a></li><li><a href="/tech/algorithm/sort-algorithm/bubble-sort.html" class="sidebar-link">å†’æ³¡ç®—æ³•</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å‰ç«¯ç›‘æ§</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/monitor/monitor/" class="sidebar-link">æ­å»ºå‰ç«¯ç›‘æ§ç³»ç»Ÿ</a></li><li><a href="/tech/monitor/data-visualization/histogram/" class="sidebar-link">ç›´æ–¹å›¾ ï¼ˆHistogramï¼‰</a></li><li><a href="/tech/monitor/data-visualization/1/" class="sidebar-link">1. Promethus ä»‹ç»</a></li><li><a href="/tech/monitor/data-visualization/2/" class="sidebar-link">2. Exporter å®æˆ˜è¯¦è§£</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React Native</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/react-native/webview/" class="sidebar-link">RN Webview å†…åµŒh5æ–¹æ¡ˆè°ƒç ”</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ€è€ƒ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/think/2021-06-20.html" class="sidebar-link">æŠ¬å¤´çœ‹è·¯</a></li><li><a href="/tech/think/2022-02-14.html" class="sidebar-link">è¢«å‡ ä¸ªæœˆä»£ç†leader</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>å…¶ä»–</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/other/abort-request.html" class="sidebar-link">ç»ˆæ­¢å¼‚æ­¥ä»»åŠ¡</a></li><li><a href="/tech/other/cicd-concepts.html" class="sidebar-link">CI/CD æ¦‚å¿µ</a></li><li><a href="/tech/other/flow-chart.html" class="sidebar-link">æµç¨‹å›¾è§„èŒƒ</a></li><li><a href="/tech/other/google-search.html" class="sidebar-link">google æœç´¢æŠ€å·§</a></li><li><a href="/tech/other/how-to-output-log.html" class="sidebar-link">å‚è€ƒèµ„æ–™</a></li><li><a href="/tech/other/linux-command.html" class="sidebar-link">linux å¸¸ç”¨å‘½ä»¤</a></li><li><a href="/tech/other/sketchup.html" class="sidebar-link">SketchUp åŸºç¡€å…¥é—¨</a></li><li><a href="/tech/other/docker/docker-introduction/" class="sidebar-link">Docker æµ…å°è¾„æ­¢</a></li><li><a href="/tech/other/lerna/" aria-current="page" class="active sidebar-link">lerna ç®€å•å…¥é—¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/other/lerna/#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-lerna" class="sidebar-link">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ lerna</a></li><li class="sidebar-sub-header"><a href="/tech/other/lerna/#å¦‚ä½•ä½¿ç”¨-lerna" class="sidebar-link">å¦‚ä½•ä½¿ç”¨ Lerna</a></li><li class="sidebar-sub-header"><a href="/tech/other/lerna/#æ€»ç»“" class="sidebar-link">æ€»ç»“</a></li><li class="sidebar-sub-header"><a href="/tech/other/lerna/#å‚è€ƒèµ„æ–™" class="sidebar-link">å‚è€ƒèµ„æ–™</a></li></ul></li><li><a href="/tech/other/npm/" class="sidebar-link">é‡æ–°è®¤è¯† npm</a></li><li><a href="/tech/other/svg/" class="sidebar-link">svg ä¸å®Œå…¨å…¥é—¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>é¢è¯•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/interview/handwritten-topic.html" class="sidebar-link">å‰ç«¯æ‰‹å†™é¢˜</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="lerna-ç®€å•å…¥é—¨"><a href="#lerna-ç®€å•å…¥é—¨" class="header-anchor">#</a> lerna ç®€å•å…¥é—¨</h1> <p><img src="/assets/img/79596653-38f81200-80e1-11ea-98cd-1c6a3bb5de51.d0b5c1e5.png" alt=""></p> <p>æœ¬ç¯‡å°†å›´ç»•<strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ lerna</strong>ä»¥åŠ<strong>å¦‚ä½•ä½¿ç”¨ lerna</strong> ä¸¤ä¸ªæ–¹é¢æ¥è®¤è¯† lernaã€‚</p> <h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-lerna"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-lerna" class="header-anchor">#</a> ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ lerna</h2> <p>å…ˆæ¥çœ‹ä¸‹å®˜æ–¹çš„è§£é‡Šï¼š</p> <blockquote><ul><li>Splitting up large codebases into separate independently versioned packages is extremely useful for code sharing. However, making changes across many repositories is messy and difficult to track, and testing across repositories becomes complicated very quickly.</li> <li>To solve these (and many other) problems, some projects will organize their codebases into multi-package repositories (sometimes called monorepos). Projects like Babel, React, Angular, Ember, Meteor, Jest, and many others develop all of their packages within a single repository.</li> <li>Lerna is a tool that optimizes the workflow around managing multi-package repositories with git and npm.</li> <li>Lerna can also reduce the time and space requirements for numerous copies of packages in development and build environments - normally a downside of dividing a project into many separate NPM packages. See the hoist documentation for details.</li></ul></blockquote> <p>æ„æ€å°±æ˜¯è¯´æˆ‘ä»¬å¼€å‘çš„ä¸€äº›é¡¹ç›®å­˜åœ¨ç›¸äº’ä¾èµ–çš„æƒ…å†µï¼ŒåŒæ—¶å‘¢è¿™äº›é¡¹ç›®åˆæ˜¯åœ¨ä¸åŒçš„ä»“åº“é‡Œé¢ï¼Œè¿™å°±ç»™å¼€å‘ã€ç»´æŠ¤å’Œæµ‹è¯•å¸¦æ¥äº†æå¤§çš„å›°éš¾ã€‚
ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œä¸€äº›é¡¹ç›®å°±æŠŠè¿™äº›ç›¸äº’ä¾èµ–çš„é¡¹ç›®ç»„ç»‡æˆå¤šåŒ…çš„å½¢å¼æ”¾åœ¨åŒä¸€ä¸ªä»£ç ä»“åº“é‡Œé¢ï¼ˆä¿—ç§° monoreposï¼‰ã€‚
Babel, React, Angular, Ember, Meteor, Jest ç­‰éƒ½æ˜¯å°†å®ƒä»¬çš„åŒ…æ”¾åœ¨åŒä¸€ä¸ªä»“åº“ä¸­æ¥ç»´æŠ¤çš„ã€‚
Lernaå¹²çš„äº‹æƒ…å°±æ˜¯ä½¿ç”¨ git å’Œ npm æ¥ä¼˜åŒ–å¤šåŒ…åº“çš„ç®¡ç†å·¥ä½œæµç¨‹ã€‚</p> <h2 id="å¦‚ä½•ä½¿ç”¨-lerna"><a href="#å¦‚ä½•ä½¿ç”¨-lerna" class="header-anchor">#</a> å¦‚ä½•ä½¿ç”¨ Lerna</h2> <h3 id="lerna-ç®¡ç†é¡¹ç›®çš„æ¨¡å¼"><a href="#lerna-ç®¡ç†é¡¹ç›®çš„æ¨¡å¼" class="header-anchor">#</a> Lerna ç®¡ç†é¡¹ç›®çš„æ¨¡å¼</h3> <p>Lerna æœ‰ä¸¤ç§ç®¡ç†é¡¹ç›®çš„æ¨¡å¼ï¼š</p> <ul><li><p>Fixed/Locked æ¨¡å¼ (é»˜è®¤)ï¼š æ‰€æœ‰çš„åŒ…å…±ç”¨ä¸€ä¸ªç‰ˆæœ¬å·ã€‚</p></li> <li><p>Independent modeï¼š åœ¨åˆå§‹åŒ–çš„æ—¶å€™æŒ‡å®š --independent å‚æ•°ï¼š</p></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>lerna init --independent
</code></pre></div><p>è¿™ç§æ¨¡å¼ä¸‹ï¼Œå¯ä»¥å•ç‹¬çš„ä¸ºæ¯ä¸ªåŒ…æŒ‡å®šç‰ˆæœ¬å·ã€‚</p> <p>learnä¸ºæˆ‘ä»¬æä¾›äº†ä»¥ä¸‹å‘½ä»¤ï¼š</p> <ul><li>lerna publish</li> <li>lerna version</li> <li>lerna bootstrap</li> <li>lerna list</li> <li>lerna changed</li> <li>lerna diff</li> <li>lerna exec</li> <li>lerna run</li> <li>lerna init</li> <li>lerna add</li> <li>lerna clean</li> <li>lerna import</li> <li>lerna link</li> <li>lerna create</li> <li>lerna info</li></ul> <p>ä¸‹é¢é€šè¿‡å…·ä½“çš„demoæ¥ä½¿ç”¨ä¸€ä¸‹è¿™äº›å‘½ä»¤ã€‚</p> <h3 id="lerna-init"><a href="#lerna-init" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/init#readme" target="_blank" rel="noopener noreferrer">lerna init<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šåˆå§‹åŒ–é¡¹ç›®</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># é‡‡ç”¨ç‹¬ç«‹æ¨¡å¼</span>
$ <span class="token function">mkdir</span> lerna-example <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> <span class="token variable">$_</span> <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> <span class="token function">install</span> lerna -D <span class="token operator">&amp;&amp;</span> npx lerna init --independent
</code></pre></div><p>ç”Ÿæˆçš„é¡¹ç›®ç›®å½•å¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>lerna-example/
  packages/
  package.json
  lerna.json
</code></pre></div><p>lerna.json å„ä¸ªå­—æ®µçš„å«ä¹‰ï¼š</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.1.3&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;npmClient&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;publish&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;ignoreChanges&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;ignored-file&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*.md&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;chore(release): publish&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;registry&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://npm.pkg.github.com&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;bootstrap&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span> <span class="token string">&quot;component-*&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;npmClientArgs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;--no-package-lock&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;packages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;packages/*&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>version: å½“å‰é¡¹ç›®çš„ç‰ˆæœ¬ï¼Œå¦‚æœæ˜¯independentæ¨¡å¼çš„è¯è¿™é‡Œæ˜¯ &quot;independent&quot; å­—ç¬¦ä¸²</li> <li>npmClient: é»˜è®¤æ˜¯ npmï¼Œå¯ä»¥ä½¿ç”¨yarn</li> <li>command.publish.ignoreChanges: æŒ‡å®šå“ªäº›æ–‡ä»¶çš„æ›´æ–°ä¸éœ€è¦å‘å¸ƒï¼Œä¾‹å¦‚ä¿®æ”¹ READMEã€‚</li> <li>command.publish.message: åœ¨å‘ç‰ˆæ›´æ–° version çš„æ—¶å€™æŒ‡å®šè‡ªå®šä¹‰ commit message</li> <li>command.publish.registry: æŒ‡å®šè¿œç¨‹ä»“åº“</li> <li>command.bootstrap.ignore: æ‰§è¡Œ lerna bootstrap æ—¶å¿½ç•¥çš„æ–‡ä»¶</li> <li>command.bootstrap.npmClientArgs: æ‰§è¡Œ lerna bootstrap å‘½ä»¤ä¼šå»æ‰§è¡Œ npm install è¿™é‡Œçš„å‚æ•°å°±æ˜¯ä¼ é€’ç»™ npm install çš„ã€‚</li> <li>command.bootstrap.scope: å†³å®šåœ¨æ‰§è¡Œ lerna bootstrap çš„æ—¶å€™å“ªäº› package éœ€è¦ bootstrap</li> <li>packages: æŒ‡å®š package å­˜æ”¾çš„ä½ç½®</li></ul> <p>ç°åœ¨æˆ‘ä»¬çš„ packages ä¸‹é¢ä»€ä¹ˆéƒ½è¿˜æ²¡æœ‰ï¼Œä¸‹é¢æˆ‘ä»¬æ¥åˆ›å»ºä¸€äº›åŒ…ã€‚</p> <h3 id="lerna-create"><a href="#lerna-create" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/create#readme" target="_blank" rel="noopener noreferrer">lerna create<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šé€šè¿‡ lerna create åˆ›å»ºä¸€ä¸ªæ–°çš„åŒ…ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ›å»º</p> <div class="language-bash extra-class"><pre class="language-bash"><code>lerna create animal
lerna create <span class="token function">cat</span> 
lerna create dog
</code></pre></div><p>è¿™é‡Œæˆ‘ä»¬åˆ›å»ºäº†animal cat dog ä¸‰ä¸ªåŒ…é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p> <div class="language- extra-class"><pre class="language-text"><code>.
â”œâ”€â”€ lerna.json
â”œâ”€â”€ package.json
â””â”€â”€ packages
    â”œâ”€â”€ animal
    â”‚   â”œâ”€â”€ README.md
    â”‚   â”œâ”€â”€ __tests__
    â”‚   â”‚   â””â”€â”€ animal.test.js
    â”‚   â”œâ”€â”€ lib
    â”‚   â”‚   â””â”€â”€ animal.js
    â”‚   â””â”€â”€ package.json
    â”œâ”€â”€ cat
    â”‚   â”œâ”€â”€ README.md
    â”‚   â”œâ”€â”€ __tests__
    â”‚   â”‚   â””â”€â”€ cat.test.js
    â”‚   â”œâ”€â”€ lib
    â”‚   â”‚   â””â”€â”€ cat.js
    â”‚   â””â”€â”€ package.json
    â””â”€â”€ dog
        â”œâ”€â”€ README.md
        â”œâ”€â”€ __tests__
        â”‚   â””â”€â”€ dog.test.js
        â”œâ”€â”€ lib
        â”‚   â””â”€â”€ dog.js
        â””â”€â”€ package.json
</code></pre></div><h3 id="lerna-add"><a href="#lerna-add" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/add#readme" target="_blank" rel="noopener noreferrer">lerna add<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šlearn add æ·»åŠ æœ¬åœ°åŒ…æˆ–è€…è¿œç¨‹åŒ…ä½œä¸ºåŒ…çš„ä¾èµ–</p> <div class="language- extra-class"><pre class="language-text"><code># å‘åå­—ä»¥ prefix- ä¸ºå‰ç¼€çš„æ–‡ä»¶å¤¹é‡Œé¢æ·»åŠ  module-1 ä½œä¸ºä¾èµ–
$ lerna add module-1 packages/prefix-*

# å‘ module-2 ä¸­æ·»åŠ  module-1 ä½œä¸ºä¾èµ–
$ lerna add module-1 --scope=module-2

# å‘ module-2 ä¸­æ·»åŠ  module-1 ä½œä¸ºå¼€å‘ä¾èµ–ï¼ˆdevDependenciesï¼‰
$ lerna add module-1 --scope=module-2 --dev

# å‘ module-2 ä¸­æ·»åŠ  module-1 ä½œä¸ºpeerDependencies
$ lerna add module-1 --scope=module-2 --peer

# å‘é™¤äº†module-1ï¼ˆå› ä¸º module-1 æ˜¯æœ¬åœ°åŒ…ï¼‰çš„æ‰€æœ‰åŒ…ä¸­æ·»åŠ  module-1 ä½œä¸ºä¾èµ–
$ lerna add module-1

# å‘æ‰€æœ‰çš„åŒ…ä¸­æ·»åŠ  babel-core ä½œä¸ºä¾èµ–ï¼ˆ babel-core æ˜¯è¿œç¨‹åŒ…ï¼‰
$ lerna add babel-core
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code># æ·»åŠ çš„ animal ä½œä¸º dogã€cat çš„ä¾èµ–
$ lerna add animal 
</code></pre></div><p>æŸ¥çœ‹ dog æˆ–è€… cat çš„ dependencies ä¼šçœ‹åˆ°åŠ å…¥çš„ä¾èµ– animalã€‚</p> <h3 id="lerna-version"><a href="#lerna-version" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/version#readme" target="_blank" rel="noopener noreferrer">lerna version<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šå‘å¸ƒå‰æ›´æ–°åŒ…çš„ç‰ˆæœ¬ ï¼ˆlerna publish åŒ…å«è¿™ä¸€æ­¥ï¼‰</p> <p>ç”¨æ³•ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>lerna version <span class="token number">1.0</span>.1 <span class="token comment"># ç›´æ¥æŒ‡å®šç‰¹å®šçš„ç‰ˆæœ¬</span>
lerna version patch <span class="token comment"># ä½¿ç”¨è¯­ä¹‰å…³é”®å­—</span>
lerna version       <span class="token comment"># é€šè¿‡äº¤äº’å¼å‘½ä»¤é€‰æ‹©</span>
</code></pre></div><p>lerna version åœ¨èƒŒåä¸ºæˆ‘ä»¬åšäº†è¿™äº›äº‹ï¼š</p> <ol><li>è¯†åˆ«å‡ºè‡ªä¸Šæ¬¡å‘å¸ƒä»¥åæ›´æ–°è¿‡çš„åŒ…ï¼›</li> <li>æç¤ºé€‰æ‹©æ–°ç‰ˆæœ¬ï¼›</li> <li>ä¿®æ”¹åŒ…çš„å…ƒæ•°æ®æ¥åæ˜ æœ€æ–°å‘ç‰ˆï¼ˆä¿®æ”¹åŒ…çš„ç‰ˆæœ¬å·ï¼‰ï¼Œåœ¨æ ¹ç›®å½•å’Œæ¯ä¸ªåŒ…é‡Œé¢è¿è¡Œç”Ÿå‘½å‘¨æœŸè„šæœ¬ï¼›</li> <li>å¯¹æäº¤æ‰“ tagï¼›</li> <li>æ¨é€åˆ°è¿œç¨‹ä»£ç ä»“åº“ã€‚</li></ol> <p>å…ˆ commit æœ¬åœ°çš„æ”¹åŠ¨ï¼Œç„¶åæ‰§è¡Œ lerna versionï¼Œé»˜è®¤æƒ…å†µä¸‹ lerna version ä¼šå°†æœ¬åœ°çš„ commit å’Œ tag æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œè¿™é‡Œåªæ˜¯æœ¬åœ°æ¼”ç¤ºå¯ä»¥é€šè¿‡æŒ‡å®š --no-push å‚æ•°æ¥ç¦æ­¢æ¨é€ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ lerna version --no-push
info cli using <span class="token builtin class-name">local</span> version of lerna
lerna notice cli v4.0.0
lerna info versioning independent
lerna info Looking <span class="token keyword">for</span> changed packages since animal@1.0.1
? Select a new version <span class="token keyword">for</span> <span class="token function">cat</span> <span class="token punctuation">(</span>currently <span class="token number">1.0</span>.0<span class="token punctuation">)</span> <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
â¯ Patch <span class="token punctuation">(</span><span class="token number">1.0</span>.1<span class="token punctuation">)</span> 
  Minor <span class="token punctuation">(</span><span class="token number">1.1</span>.0<span class="token punctuation">)</span> 
  Major <span class="token punctuation">(</span><span class="token number">2.0</span>.0<span class="token punctuation">)</span> 
  Prepatch <span class="token punctuation">(</span><span class="token number">1.0</span>.1-alpha.0<span class="token punctuation">)</span> 
  Preminor <span class="token punctuation">(</span><span class="token number">1.1</span>.0-alpha.0<span class="token punctuation">)</span> 
  Premajor <span class="token punctuation">(</span><span class="token number">2.0</span>.0-alpha.0<span class="token punctuation">)</span> 
  Custom Prerelease 
  Custom Version 
<span class="token punctuation">..</span>.
</code></pre></div><h3 id="lerna-publish"><a href="#lerna-publish" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/publish#readme" target="_blank" rel="noopener noreferrer">lerna publish<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼š å‘å¸ƒæœ¬åœ°åŒ…</p> <p>ç”¨æ³•ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#å‘å¸ƒè‡ªä¸Šæ¬¡å‘å¸ƒè¿‡åæ›´æ–°è¿‡çš„åŒ… ï¼ˆèƒŒåä¼šæ‰§è¡Œ lerna versionï¼‰</span>
$ lerna publish 
<span class="token comment">#å‘å¸ƒå½“å‰é€šè¿‡ lerna version æ‰“å¥½ tag çš„åŒ…ï¼Œéœ€è¦å…ˆä½¿ç”¨ lerna version æ›´æ–°ç‰ˆæœ¬</span>
$ lerna publish from-git
<span class="token comment">#åªå‘å¸ƒè¿œç¨‹ npm ä»“åº“ä¸­æ²¡æœ‰çš„ç‰ˆæœ¬ï¼Œé€‚ç”¨äº lerna publish æ²¡æœ‰å…¨éƒ¨å‘å¸ƒæˆåŠŸçš„åœºæ™¯ã€‚</span>
$ lerna publish from-package
</code></pre></div><p>ä¸ºäº†çœŸå®åœ°æ¨¡æ‹Ÿå‘åŒ…è¿‡ç¨‹è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <a href="https://verdaccio.org/" target="_blank" rel="noopener noreferrer">Verdaccio<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ­å»ºä¸€ä¸ªæœ¬åœ° npm ä»“åº“</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å…¨å±€å®‰è£…</span>
$ <span class="token function">npm</span> <span class="token function">install</span> -g verdaccio
$ verdaccio
</code></pre></div><p>è®¿é—® <code>http://localhost:4873/</code> å¯ä»¥çœ‹åˆ°å¯åŠ¨ç•Œé¢ã€‚</p> <ul><li><p>å°†æ¯ä¸ªåŒ… package.json ä¸­çš„ publishConfig.registry æ”¹ä¸º <code>http://localhost:4873/</code></p></li> <li><p>æˆ–è€…åœ¨é¡¹ç›®çš„æ ¹ç›®å½•åˆ›å»º .npmrc æ–‡ä»¶ï¼Œå°† npm ä»“åº“åœ°å€æ”¹å†™ä¸ºæœ¬åœ°ä»“åº“åœ°å€ï¼š <code>registry=&quot;http://localhost:4873/&quot;</code>ï¼Œæ³¨æ„å°†æ¯ä¸ªåŒ… package.json ä¸­çš„ publishConfig å­—æ®µå»æ‰</p></li></ul> <p>åœ¨ dog.js ä¸­æ·»åŠ ä¸€è¡Œ <code>console.log(&quot;bark&quot;)</code>,å‡†å¤‡å°±ç»ªå commit æäº¤æœ¬åœ°çš„ä¿®æ”¹ï¼Œç„¶åæ‰§è¡Œï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ lerna publish --no-push
info cli using <span class="token builtin class-name">local</span> version of lerna
lerna notice cli v4.0.0
lerna info versioning independent
lerna info Looking <span class="token keyword">for</span> changed packages since cat@1.0.3
? Select a new version <span class="token keyword">for</span> dog <span class="token punctuation">(</span>currently <span class="token number">1.0</span>.4<span class="token punctuation">)</span> <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
â¯ Patch <span class="token punctuation">(</span><span class="token number">1.0</span>.5<span class="token punctuation">)</span> 
  Minor <span class="token punctuation">(</span><span class="token number">1.1</span>.0<span class="token punctuation">)</span> 
  Major <span class="token punctuation">(</span><span class="token number">2.0</span>.0<span class="token punctuation">)</span> 
  Prepatch <span class="token punctuation">(</span><span class="token number">1.0</span>.5-alpha.0<span class="token punctuation">)</span> 
  Preminor <span class="token punctuation">(</span><span class="token number">1.1</span>.0-alpha.0<span class="token punctuation">)</span> 
  Premajor <span class="token punctuation">(</span><span class="token number">2.0</span>.0-alpha.0<span class="token punctuation">)</span> 
  Custom Prerelease 
  Custom Version 
<span class="token punctuation">..</span>.
</code></pre></div><p>å‘½ä»¤è¡Œä¸­ä¼šè®©æˆ‘ä»¬è¿›è¡Œç‰ˆæœ¬çš„é€‰æ‹©å’Œç¡®è®¤ï¼Œç¡®è®¤å®Œæ¯•åå°±ä¼šå°†æˆ‘ä»¬çš„åŒ…å‘å¸ƒåˆ° npm ä»“åº“ä¸­ã€‚</p> <p>åˆ·æ–° <code>http://localhost:4873/</code> å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆšåˆšå‘å¸ƒçš„åŒ…äº†ã€‚</p> <h3 id="lerna-list"><a href="#lerna-list" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/list#readme" target="_blank" rel="noopener noreferrer">lerna list<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šåˆ—å‡ºæ‰€æœ‰çš„æœ¬åœ°åŒ…</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ lerna list      
info cli using <span class="token builtin class-name">local</span> version of lerna
lerna notice cli v4.0.0
lerna info versioning independent
animal
<span class="token function">cat</span>
dog
lerna success found <span class="token number">3</span> packages
</code></pre></div><h3 id="lerna-info"><a href="#lerna-info" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/info#readme" target="_blank" rel="noopener noreferrer">lerna info<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šæ‰“å°å‡ºæœ¬åœ°ç¯å¢ƒä¿¡æ¯</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ lerna info   
info cli using <span class="token builtin class-name">local</span> version of lerna
lerna notice cli v4.0.0
lerna info versioning independent

 Environment info:

  System:
    OS: macOS <span class="token number">11.5</span>.2
    CPU: <span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> x64 Intel<span class="token punctuation">(</span>R<span class="token punctuation">)</span> Core<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> i7-7920HQ CPU @ <span class="token number">3</span>.10GHz
  Binaries:
    Node: <span class="token number">14.16</span>.0 - ~/.nvm/versions/node/v14.16.0/bin/node
    Yarn: <span class="token number">1.22</span>.4 - ~/.yarn/bin/yarn
    npm: <span class="token number">6.14</span>.11 - ~/.nvm/versions/node/v14.16.0/bin/npm
  Utilities:
    Git: <span class="token number">2.24</span>.3 - /usr/bin/git
  npmPackages:
    lerna: ^4.0.0 <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">4.0</span>.0 
</code></pre></div><h3 id="lerna-changed"><a href="#lerna-changed" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/changed#readme" target="_blank" rel="noopener noreferrer">lerna changed<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šåˆ—å‡ºè‡ªä¸Šä¸€æ¬¡å‘å¸ƒè¿‡åä¿®æ”¹è¿‡çš„åŒ…</p> <p>ä¿®æ”¹æ–‡ä»¶ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ lerna changed   
info cli using <span class="token builtin class-name">local</span> version of lerna
lerna notice cli v4.0.0
lerna info versioning independent
lerna info Assuming all packages changed
animal
<span class="token function">cat</span>
dog
lerna success found <span class="token number">3</span> packages ready to publish
</code></pre></div><h3 id="lerna-clean"><a href="#lerna-clean" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/clean#readme" target="_blank" rel="noopener noreferrer">lerna clean<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šç§»é™¤æ‰€æœ‰ package ä¸‹çš„ node_modulesï¼Œé™¤äº†æ ¹ç›®å½•ä¸‹çš„ node_modules</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ lerna clean               
info cli using <span class="token builtin class-name">local</span> version of lerna
lerna notice cli v4.0.0
lerna info versioning independent
lerna info Removing the following directories:
lerna info clean packages/animal/node_modules
lerna info clean packages/cat/node_modules
lerna info clean packages/dog/node_modules
? Proceed? Yes
<span class="token punctuation">..</span>.
</code></pre></div><h3 id="lerna-bootstrap"><a href="#lerna-bootstrap" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/bootstrap#readme" target="_blank" rel="noopener noreferrer">lerna bootstrap<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šå»ºç«‹ç›¸äº’ä¾èµ–çš„åŒ…ä¹‹é—´çš„è½¯è¿æ¥å¹¶å®‰è£…å…¶ä»–çš„ä¾èµ–</p> <p>è¿™ä¸ªå‘½ä»¤åœ¨èƒŒåæ‰§è¡Œäº†ä»¥ä¸‹æ­¥éª¤:</p> <ul><li>å®‰è£…æ‰€æœ‰åŒ…çš„å¤–éƒ¨ä¾èµ–</li> <li>å»ºç«‹å­˜åœ¨ä¾èµ–å…³ç³»çš„åŒ…ä¹‹é—´çš„ä¾èµ–</li> <li>åœ¨ bootstrapped çš„åŒ…ä¸­æ‰§è¡Œ npm run prepublish ï¼ˆæ²¡æœ‰æŒ‡å®š --ignore-prepublish çš„æƒ…å†µä¸‹ï¼‰</li> <li>åœ¨ bootstrapped çš„åŒ…ä¸­æ‰§è¡Œnpm run prepare</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ lerna bootstrap
info cli using <span class="token builtin class-name">local</span> version of lerna
lerna notice cli v4.0.0
lerna info versioning independent
lerna info Bootstrapping <span class="token number">3</span> packages
lerna info Symlinking packages and binaries
lerna success Bootstrapped <span class="token number">3</span> packages
</code></pre></div><h3 id="lerna-diff"><a href="#lerna-diff" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/diff#readme" target="_blank" rel="noopener noreferrer">lerna diff<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šåˆ—å‡ºåŒ…è‡ªä¸Šä¸€æ¬¡å‘ç‰ˆä»¥æ¥åšå‡ºçš„ä¿®æ”¹ã€‚</p> <p>ç”¨æ³•ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># åˆ—å‡ºæ‰€æœ‰åŒ…çš„æ”¹åŠ¨</span>
$ lerna <span class="token function">diff</span> 
<span class="token comment"># åˆ—å‡ºå…·ä½“æŸä¸ªåŒ…çš„æ”¹åŠ¨</span>
$ lerna <span class="token function">diff</span> package-name
</code></pre></div><h3 id="lerna-exec"><a href="#lerna-exec" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/exec#readme" target="_blank" rel="noopener noreferrer">lerna exec<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šä½¿ç”¨ lerna exec å¯ä»¥åœ¨æ‰€æœ‰çš„åŒ…ç›®å½•ä¸‹æ‰§è¡Œä»»æ„çš„å‘½ä»¤ã€‚</p> <p>ç”¨æ³•ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>lerna <span class="token builtin class-name">exec</span> -- <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>args<span class="token punctuation">]</span> <span class="token comment"># runs the command in all packages</span>
lerna <span class="token builtin class-name">exec</span> -- <span class="token function">rm</span> -rf ./node_modules <span class="token comment"># åˆ é™¤æ‰€æœ‰åŒ…ä¸‹é¢çš„ node_modules</span>
</code></pre></div><h3 id="lerna-run"><a href="#lerna-run" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/run#readme" target="_blank" rel="noopener noreferrer">lerna run<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šä½¿ç”¨ lerna run å¯ä»¥åœ¨æ‰€æœ‰çš„åŒ…ç›®å½•ä¸‹æ‰§è¡Œå¯¹åº”çš„è„šæœ¬ã€‚</p> <p>ç”¨æ³•ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>lerna run <span class="token builtin class-name">test</span> <span class="token comment"># æ‰§è¡Œæ‰€æœ‰åŒ…çš„ test å‘½ä»¤</span>
</code></pre></div><h3 id="lerna-import"><a href="#lerna-import" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/import#readme" target="_blank" rel="noopener noreferrer">lerna import<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šå°†å·²ç»å­˜åœ¨çš„é¡¹ç›®ä½œä¸ºä¸€ä¸ªåŒ…å¯¼å…¥åˆ°ç°æœ‰çš„lernaé¡¹ç›®ä¸­ï¼ŒåŒæ—¶é¡¹ç›®çš„ commit å†å²è®°å½•ä¼šè¢«ä¸€å¹¶å¯¼å…¥ã€‚</p> <p>ç”¨æ³•ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>lerna <span class="token function">import</span> <span class="token operator">&lt;</span>path-to-external-repository<span class="token operator">&gt;</span>
</code></pre></div><h3 id="lerna-link"><a href="#lerna-link" class="header-anchor">#</a> <a href="https://github.com/lerna/lerna/tree/main/commands/link#readme" target="_blank" rel="noopener noreferrer">lerna link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ä½œç”¨ï¼šå»ºç«‹å­˜åœ¨ä¾èµ–å…³ç³»çš„åŒ…ä¹‹é—´çš„è½¯è¿æ¥</p> <p>ç”¨æ³•ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>lerna <span class="token function">link</span>
</code></pre></div><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h2> <p>æœ¬ç¯‡å¯¹ lerna ç®¡ç†å¤šåŒ…é¡¹ç›®çš„å®è·µè¿‡ç¨‹åšäº†ä¸€äº›ç®€å•çš„è®²è§£ï¼Œåšåˆ°åŸºæœ¬å…¥é—¨åº”è¯¥é—®é¢˜ä¸å¤§ï¼Œå‰©ä¸‹çš„å°±è‡ªç”±å‘æŒ¥äº† ğŸ˜Šã€‚</p> <h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="header-anchor">#</a> å‚è€ƒèµ„æ–™</h2> <ul><li><a href="https://zhuanlan.zhihu.com/p/398080866" target="_blank" rel="noopener noreferrer">Lernaå·¥ä½œæµæ¢ç´¢<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://fed.taobao.org/blog/taofed/do71ct/uihagy/" target="_blank" rel="noopener noreferrer">All in oneï¼šé¡¹ç›®çº§ monorepo ç­–ç•¥æœ€ä½³å®è·µ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6844903856153821198" target="_blank" rel="noopener noreferrer">Lerna ä¸­æ–‡æ•™ç¨‹è¯¦è§£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/35237759" target="_blank" rel="noopener noreferrer">ä½¿ç”¨lernaä¼˜é›…åœ°ç®¡ç†å¤šä¸ªpackage<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/tech/other/docker/docker-introduction/" class="prev">
        Docker æµ…å°è¾„æ­¢
      </a></span> <span class="next"><a href="/tech/other/npm/">
        é‡æ–°è®¤è¯† npm
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.20c2ee50.js" defer></script><script src="/assets/js/2.c1155b6d.js" defer></script><script src="/assets/js/20.4c13fb15.js" defer></script>
  </body>
</html>
