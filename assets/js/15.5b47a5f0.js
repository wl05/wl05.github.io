(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{514:function(e,t,s){e.exports=s.p+"assets/img/git-rebase-i.0ff1c276.png"},515:function(e,t,s){e.exports=s.p+"assets/img/git-rebase-commit.6a4252f4.png"},561:function(e,t,s){"use strict";s.r(t);var a=s(14),v=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"git-rebase-详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-rebase-详解"}},[e._v("#")]),e._v(" git rebase 详解")]),e._v(" "),a("p",[e._v("平时工作中很少使用"),a("code",[e._v("git rebase")]),e._v(" 这个命令，源于前段时间同事在我合并分支时让我先"),a("code",[e._v("rebase")]),e._v("一下，当时一脸懵逼。源于此这里学习总结一下"),a("code",[e._v("git rebase")]),e._v(" 的具体使用方法和应用场景。")]),e._v(" "),a("h2",{attrs:{id:"分支合并"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分支合并"}},[e._v("#")]),e._v(" 分支合并")]),e._v(" "),a("p",[a("code",[e._v("git rebase")]),e._v(" 这个命令最常用的场景就是合并分支了吧，平时"),a("code",[e._v("git merge")]),e._v("使用比较多，但是"),a("code",[e._v("git merge")]),e._v("合并会产生一个合并"),a("code",[e._v("commit")]),e._v("，提交记录也会分叉，平时大家用得比较多，这里就不再赘述。但是如果你想维护一条干净整洁没有冗余"),a("code",[e._v("commit")]),e._v("的分支那么"),a("code",[e._v("git rebase")]),e._v("就派上用场了。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("(master)B -> A \n(dev)D -> C -> B -> A\n          ↓\n(master)E -> B -> A \n(dev)D -> C -> E -> B -> A\n")])])]),a("p",[e._v("在这个场景中我们从"),a("code",[e._v("master")]),e._v(" 分支中"),a("code",[e._v("checkout")]),e._v("出一个"),a("code",[e._v("dev")]),e._v("分支，然后在"),a("code",[e._v("dev")]),e._v("分支上做了"),a("code",[e._v("D、C")]),e._v("两次提交，在合并到"),a("code",[e._v("master")]),e._v("分支之前又有别的开发者在"),a("code",[e._v("master")]),e._v("上做了"),a("code",[e._v("E")]),e._v("提交，此时在"),a("code",[e._v("dev")]),e._v("分支上进行"),a("code",[e._v("git rebase master")]),e._v("操作，我们就可以得到 "),a("code",[e._v("D->C->E->B->A")]),e._v("的提交记录，然后再````checkout"),a("code",[e._v("到")]),e._v("master"),a("code",[e._v("分支上执行")]),e._v("git merge dev"),a("code",[e._v("操作，此时")]),e._v("master"),a("code",[e._v("分支不会产生新的")]),e._v("commit```也不会分叉。那么这个过程发生了什么呢。")]),e._v(" "),a("p",[e._v("在"),a("code",[e._v("dev")]),e._v("分支上执行"),a("code",[e._v("git rebase master")]),e._v(" 操作时，这个命令会将"),a("code",[e._v("dev")]),e._v("分支上的所有提交保存为"),a("code",[e._v("patch")]),e._v("，并存放到"),a("code",[e._v("“.git/rebase”")]),e._v("目录下，然后"),a("code",[e._v("dev")]),e._v("分支会去同步"),a("code",[e._v("master")]),e._v("上的最新提交，紧接着将"),a("code",[e._v("dev")]),e._v("上的"),a("code",[e._v("patch")]),e._v("接到"),a("code",[e._v("dev")]),e._v("分支上。这样看来也比较好理解了。")]),e._v(" "),a("p",[e._v("总结一下操作命令：")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" checkout dev\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 执行这个命令后可能会产生一些冲突，解决完冲突后执行git add操作，然后执行 git rebase --continue")]),e._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" rebase master\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" checkout master\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" merge dev\n")])])]),a("h2",{attrs:{id:"合并多个commit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#合并多个commit"}},[e._v("#")]),e._v(" 合并多个commit")]),e._v(" "),a("p",[e._v("记得有次面试，有个面试官问我，如果想把多个没有意义的commit合并成一个有意义的"),a("code",[e._v("commit")]),e._v("应该怎么做，这个也是"),a("code",[e._v("git rebase")]),e._v("的应用场景之一。")]),e._v(" "),a("p",[e._v("下面我们举例来进行说明：")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("* cc0fac9 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" commit "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v("\n* 532cd7e commit "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\n* 42cebee commit "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\n")])])]),a("p",[e._v("这里有三个"),a("code",[e._v("commit")]),e._v("， 现在我们想把三个提交合并成一个,\n执行命令：")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" rebase -i HEAD~\n")])])]),a("p",[e._v("这时出现交互式界面：")]),e._v(" "),a("p",[a("img",{attrs:{src:s(514),alt:"git-rebase-i"}})]),e._v(" "),a("p",[e._v("这里列出了几个命令：")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Commands:")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# p, pick = use commit")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# r, reword = use commit, but edit the commit message")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# e, edit = use commit, but stop for amending")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# s, squash = use commit, but meld into previous commit")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# f, fixup = like "squash", but discard this commit\'s log message')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# x, exec = run command (the rest of the line) using shell")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# d, drop = remove commit")]),e._v("\n")])])]),a("p",[e._v("这里我们会用到"),a("code",[e._v("pick")]),e._v("和"),a("code",[e._v("squash")]),e._v("命令，\n"),a("code",[e._v("pick")]),e._v("表示保留当前"),a("code",[e._v("commit")]),e._v("，\n"),a("code",[e._v("squash")]),e._v("表示将当前"),a("code",[e._v("commit")]),e._v("与上一个"),a("code",[e._v("commit")]),e._v("合并。")]),e._v(" "),a("p",[e._v("修改命令后：")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("p 42cebee commit "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\ns 532cd7e commit "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\ns cc0fac9 commit "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v("\n")])])]),a("p",[e._v("这里表示将第"),a("code",[e._v("2")]),e._v("次，第"),a("code",[e._v("3")]),e._v("次"),a("code",[e._v("commit")]),e._v("合并到第一次"),a("code",[e._v("commit")]),e._v("上,")]),e._v(" "),a("p",[a("code",[e._v("wq")]),e._v("保存后退出。然后会进到下面的界面：")]),e._v(" "),a("p",[a("img",{attrs:{src:s(515),alt:"git-rebase-commit"}})]),e._v(" "),a("p",[e._v("这里我们可以对"),a("code",[e._v("commit message")]),e._v("进行修改。修改完后执行"),a("code",[e._v("wq")]),e._v("保存退出。")]),e._v(" "),a("p",[e._v("现在再执行"),a("code",[e._v("git log")]),e._v("看一下，我们会发现三次"),a("code",[e._v("commit")]),e._v("合并成了一个：")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("commit a7e595a8d0bf0ad2ef4bd1bd4534ef80b4b32683\nAuthor: antbaobao "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2929712050")]),e._v("@qq.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\nDate:   Wed Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("24")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("17")]),e._v(":30:49 "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2021")]),e._v(" +0800\n\n    代码合并\n")])])]),a("h1",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://gitbook.liuhui998.com/4_2.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("分支合并"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/6844903600976576519",target:"_blank",rel:"noopener noreferrer"}},[e._v("使用git rebase合并多次commit"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://www.liaoxuefeng.com/wiki/896043488029600/1216289527823648",target:"_blank",rel:"noopener noreferrer"}},[e._v("Rebase 当前分支"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=v.exports}}]);